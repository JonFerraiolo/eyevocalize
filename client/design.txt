

multiple tabs same browser

scenario 1: one tab makes a change


scenario 2: change by a different browser

server

server keeps track of all open sockets for given clientId, and whether visible
ServerInitiatedSync to all visible immediately,
nothing to hidden sockets

client

first thing with sync is refreshing from localStorage
new messages, ClientVisible, ClientHidden
when client becomes visible, sync
